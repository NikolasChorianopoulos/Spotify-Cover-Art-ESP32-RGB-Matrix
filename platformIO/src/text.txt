#include <ESP32-HUB75-MatrixPanel-I2S-DMA.h>

const int panelResX = 64;   // Number of pixels wide of each INDIVIDUAL panel module.
const int panelResY = 64;   // Number of pixels tall of each INDIVIDUAL panel module.
const int panel_chain = 1;  // Total number of panels chained one to another

// Matrix display
MatrixPanel_I2S_DMA *dma_display = nullptr;

void displaySetup() {
  HUB75_I2S_CFG mxconfig(
    panelResX,   // Martix width
    panelResY,   // Matrix height
    panel_chain  // Chain length
  );

  // If you are using a 64x64 matrix you need to pass a value for the E pin
  // The trinity connects GPIO 18 to E.
  // This can be commented out for any smaller displays (but should work fine with it)
  mxconfig.gpio.e = 32;

  // May or may not be needed depending on your matrix
  // Example of what needing it looks like:
  // https://github.com/mrfaptastic/ESP32-HUB75-MatrixPanel-I2S-DMA/issues/134#issuecomment-866367216
  mxconfig.clkphase = false;

  // Some matrix panels use different ICs for driving them and some of them have strange quirks.
  // If the display is not working right, try this.
  //mxconfig.driver = HUB75_I2S_CFG::FM6126A;

  dma_display = new MatrixPanel_I2S_DMA(mxconfig);
  dma_display->begin();
}

void setup(){
   
    Serial.begin(115200);

    displaySetup();
   
    // Rotate diaplay (0, 1, 2, 3)
    dma_display->setRotation(2);

    // Clear screen
    dma_display->fillScreen(dma_display->color565(0, 0, 0));

    dma_display->setTextSize(1);      // size 1 == 8 pixels high
    dma_display->setTextWrap(false);  // Don't wrap at end of line - will do ourselves
    dma_display->setTextColor(dma_display->color565(255, 0, 255));

    dma_display->setCursor(1, 0);  // Start at top left, with 8 pixel of spacing

    dma_display->print("MPIPI: ");
    dma_display->setCursor(48, 0);

    dma_display->setCursor(1, 10);  // Start at top left, with 8 pixel of spacing
    dma_display->print("WiFi: ");
    dma_display->setCursor(48, 10);

}

void loop(){

}